import{t as c,a as d}from"../chunks/BIrVpOs2.js";import"../chunks/DRPOqrrt.js";import{an as T,aq as k,ao as U,ag as W,at as g,ar as n,as as s,au as q,g as t,m as b,s as l}from"../chunks/DTEkcv0I.js";import{s as x}from"../chunks/C7JOVrrs.js";import{i as z}from"../chunks/ei-yTpw-.js";import{e as B,i as P}from"../chunks/DuRBOSTt.js";import{h as R}from"../chunks/Dgatg8cv.js";import{s as E}from"../chunks/Gt8zAbP4.js";import{i as A}from"../chunks/CbpWyyrn.js";import{o as F,a as G}from"../chunks/LXONcwU7.js";const J=!0,oe=Object.freeze(Object.defineProperty({__proto__:null,prerender:J},Symbol.toStringTag,{value:"Module"}));var K=c('<meta name="description" content="Svelte demo app">'),N=c('<div class="image-card svelte-143k2h7"><span id="code"> </span> <img class="svelte-143k2h7"></div>'),Q=c('<div class="gallery svelte-143k2h7"></div>'),V=c('<section class="svelte-143k2h7"><div id="log"></div> <div id="scan-bar" class="svelte-143k2h7"><span id="scan" class="svelte-143k2h7"> </span> <video id="camera" autoplay playsinline="" class="svelte-143k2h7"></video></div> <!></section>',2);function de(L,M){T(M,!1);let m=!1,i=b(""),r=null,o=b([]);function h(e){const a=e.key;if(a==="#"){m=!0,l(i,"");return}if(m){if(a==="Enter"){l(o,[...t(o),{scan:t(i),image:j()}]),setTimeout(()=>{l(i,"")},2e3),m=!1;return}a.length===1&&l(i,t(i)+a)}}async function $(){const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:720},height:{ideal:1280}},audio:!1});r=document.getElementById("camera"),r.srcObject=e}function j(){if(!r)return null;const e=document.createElement("canvas");e.width=r.videoWidth,e.height=r.videoHeight;const a=e.getContext("2d");return a?(a.drawImage(r,0,0,e.width,e.height),e.toDataURL("image/png")):null}F(()=>{if(typeof window>"u")return!1;window.addEventListener("keydown",h),$()}),G(()=>{if(typeof window>"u")return!1;window.removeEventListener("keydown",h)}),A();var v=V();R(e=>{var a=K();W.title="Home",d(e,a)});var f=g(n(v),2),_=n(f),C=n(_);s(_),q(2),s(f);var D=g(f,2);{var I=e=>{var a=Q();B(a,5,()=>[...t(o)].reverse(),P,(O,w,S)=>{var p=N(),u=n(p),H=n(u,!0);s(u);var y=g(u,2);E(y,"alt",`Captured image ${S+1}`),s(p),k(()=>{x(H,t(w).scan),E(y,"src",t(w).image)}),d(O,p)}),s(a),d(e,a)};z(D,e=>{t(o).length&&e(I)})}s(v),k(()=>x(C,`Waiting for scan: ${t(i)??""}`)),d(L,v),U()}export{de as component,oe as universal};
