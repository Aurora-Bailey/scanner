var jt=t=>{throw TypeError(t)};var Pt=(t,e,r)=>e.has(t)||jt("Cannot "+r);var lt=(t,e,r)=>(Pt(t,e,"read from private field"),r?r.call(t):e.get(t)),ct=(t,e,r)=>e.has(t)?jt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),dt=(t,e,r,a)=>(Pt(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r);import{t as U,a as A,d as tt}from"../chunks/DlvOV1e5.js";import{aA as oe,g as Vt,aB as Xt,j as le,aG as ce,o as zt,a4 as ht,aH as de,i as o,J as ue,aE as fe,p as ve,s as L,f as ut,t as B,a as me,a1 as pe,aI as be,c as C,r as z,aF as _}from"../chunks/DvJFha1T.js";import{o as ge,d as he,e as ye,s as V}from"../chunks/DtPjCCHc.js";import{i as K}from"../chunks/VIBHD4Hd.js";import{e as et,i as _e}from"../chunks/CgP-R1Yy.js";import{h as we}from"../chunks/46OpmppY.js";import{r as xe,a as St,s as Et}from"../chunks/BEVdCfZO.js";import{p as ke}from"../chunks/Dg4fSCzg.js";import{i as Ae,a as je,c as Pe,d as ze}from"../chunks/IsvSq77K.js";function Wt(t,e,r){oe(()=>{var a=Vt(()=>e(t,r==null?void 0:r())||{});if(r&&(a!=null&&a.update)){var s=!1,u={};Xt(()=>{var c=r();le(c),s&&ce(u,c)&&(u=c,a.update(c))}),s=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}function Yt(t){var e,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Yt(t[e]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function Se(){for(var t,e,r=0,a="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Yt(t))&&(a&&(a+=" "),a+=e);return a}function Ee(t){return typeof t=="object"?Se(t):t??""}const Lt=[...` 	
\r\fÂ \v\uFEFF`];function We(t,e,r){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),r){for(var s in r)if(r[s])a=a?a+" "+s:s;else if(a.length)for(var u=s.length,c=0;(c=a.indexOf(s,c))>=0;){var f=c+u;(c===0||Lt.includes(a[c-1]))&&(f===a.length||Lt.includes(a[f]))?a=(c===0?"":a.substring(0,c))+a.substring(f+1):c=f}}return a===""?null:a}function X(t,e,r,a,s,u){var c=t.__className;if(zt||c!==r||c===void 0){var f=We(r,a,u);(!zt||f!==t.getAttribute("class"))&&(f==null?t.removeAttribute("class"):t.className=f),t.__className=r}else if(u&&s!==u)for(var b in u){var S=!!u[b];(s==null||S!==!!s[b])&&t.classList.toggle(b,S)}return u}function Le(t){ht(t,t.v+1)}function Me(t){let e=0,r=ue(0),a;return()=>{de()&&(o(r),Xt(()=>(e===0&&(a=Vt(()=>t(()=>Le(r)))),e+=1,()=>{fe().then(()=>{e-=1,e===0&&(a==null||a(),a=void 0)})})))}}function Ue(t){const e=JSON.parse(t);return e.data&&(e.data=Pe(e.data,ze.decoders)),e}function ft(t){return HTMLElement.prototype.cloneNode.call(t)}function vt(t,e=()=>{}){const r=async({action:s,result:u,reset:c=!0,invalidateAll:f=!0})=>{u.type==="success"&&(c&&HTMLFormElement.prototype.reset.call(t),f&&await Ae()),(location.origin+location.pathname===s.origin+s.pathname||u.type==="redirect"||u.type==="error")&&await je(u)};async function a(s){var F,O,T,q,v;if(((F=s.submitter)!=null&&F.hasAttribute("formmethod")?s.submitter.formMethod:ft(t).method)!=="post")return;s.preventDefault();const c=new URL((O=s.submitter)!=null&&O.hasAttribute("formaction")?s.submitter.formAction:ft(t).action),f=(T=s.submitter)!=null&&T.hasAttribute("formenctype")?s.submitter.formEnctype:ft(t).enctype,b=new FormData(t),S=(q=s.submitter)==null?void 0:q.getAttribute("name");S&&b.append(S,((v=s.submitter)==null?void 0:v.getAttribute("value"))??"");const D=new AbortController;let N=!1;const E=await e({action:c,cancel:()=>N=!0,controller:D,formData:b,formElement:t,submitter:s.submitter})??r;if(N)return;let w;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const P=f==="multipart/form-data"?b:new URLSearchParams(b),n=await fetch(c,{method:"POST",headers:l,cache:"no-store",body:P,signal:D.signal});w=Ue(await n.text()),w.type==="error"&&(w.status=n.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;w={type:"error",error:l}}await E({action:c,formData:b,formElement:t,update:l=>r({action:c,result:w,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:w})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",a),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",a)}}}var Mt="mz3PUW_p",Ut=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ht=3500,Tt=.5,Ct=150,Nt="mix",Ft=12,Dt="",Ot=!0,qt=800,Jt=1600;function mt(t,e={}){let{colors:r=Ut,duration:a=Ht,force:s=Tt,particleCount:u=Ct,particleShape:c=Nt,particleSize:f=Ft,particleClass:b=Dt,destroyAfterDone:S=Ot,stageHeight:D=qt,stageWidth:N=Jt}=e;(function(v){if(document.querySelector("style[data-neoconfetti]"))return;const l=pt("style");l.dataset.neoconfetti="",l.textContent=v,bt(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",D+"px");let H=[],E=[];const w=()=>Y(M()*(Fe-1)),F=(v,l)=>c!=="rectangles"&&(v==="circles"||De(l));function O(v,l){const P=w(),n=F(c,P),i=(g,y)=>v.style.setProperty(g,y+"");i("--xlp",gt(at(Kt(l,90)-180),0,180,-N/2,N/2)+"px"),i("--dc",a-Y(1e3*M())+"ms");const d=M()<Te?G(M()*Ce,2):0;i("--x1",d),i("--x2",-1*d),i("--x3",d),i("--x4",G(at(gt(at(Kt(l,90)-180),0,180,-1,1)),4)),i("--y1",G(M()*Rt,4)),i("--y2",G(M()*s*(Zt()?1:-1),4)),i("--y3",Rt),i("--y4",G(Ne(gt(at(l-180),0,180,s,-s),0),4)),i("--w",(n?f:Y(4*M())+f/2)+"px"),i("--h",(n?f:Y(2*M())+f)+"px");const m=P.toString(2).padStart(3,"0").split("");i("--hr",m.map(g=>+g/2+"").join(" ")),i("--r",m.join(" ")),i("--rd",G(M()*(He-Bt)+Bt)+"ms"),i("--br",n?"50%":0)}let T;function q(){t.innerHTML="",clearTimeout(T),H=It(u,r),E=function(v,l=[],P){const n=[];for(const{color:i}of l){const d=pt("div");d.className=`${Mt} ${P}`,d.style.setProperty("--bgc",i);const m=pt("div");bt(d,m),bt(v,d),n.push(d)}return n}(t,H,b);for(const[v,l]of Gt(E))O(l,H[+v].degree);T=setTimeout(()=>{S&&(t.innerHTML="")},a)}return q(),{update(v){const l=v.particleCount??Ct,P=v.particleShape??Nt,n=v.particleSize??Ft,i=v.particleClass??Dt,d=v.colors??Ut,m=v.stageHeight??qt,g=v.duration??Ht,y=v.force??Tt,p=v.stageWidth??Jt,W=v.destroyAfterDone??Ot;H=It(l,d);let x=!1;if(l===u){E=Array.from(t.querySelectorAll(`.${Mt}`));for(const[J,{color:j}]of Gt(H)){const h=E[+J];JSON.stringify(r)!==JSON.stringify(d)&&h.style.setProperty("--bgc",j),P!==c&&h.style.setProperty("--br",F(P,w())?"50%":"0"),i!==b&&(b&&h.classList.remove(b),i&&h.classList.add(i))}}else x=!0;S&&!W&&clearTimeout(T),t.style.setProperty("--sh",m+"px"),a=g,r=d,s=y,u=l,c=P,f=n,b=i,S=W,D=m,N=p,x&&q()},destroy(){t.innerHTML="",clearTimeout(T)}}}var Bt=200,He=800,Te=.1,Ce=.3,Rt=.5,at=Math.abs,M=Math.random,Y=Math.round,Ne=Math.max,pt=t=>document.createElement(t),bt=(t,e)=>t.appendChild(e),It=(t,e)=>Array.from({length:t},(r,a)=>({color:e[a%e.length],degree:360*a/t})),G=(t,e=2)=>Y((t+Number.EPSILON)*10**e)/10**e,gt=(t,e,r,a,s)=>(t-e)*(s-a)/(r-e)+a,Kt=(t,e)=>t+e>360?t+e-360:t+e,Zt=()=>M()>.5,Gt=Object.entries,Fe=6,De=t=>t!==1&&Zt(),Z,$;class Oe{constructor(e,r){ct(this,Z);ct(this,$);dt(this,Z,e),dt(this,$,Me(r))}get current(){return lt(this,$).call(this),lt(this,Z).call(this)}}Z=new WeakMap,$=new WeakMap;const qe=/\(.+\)/;class Je extends Oe{constructor(e,r){let a=qe.test(e)?e:`(${e})`;const s=window.matchMedia(a);super(()=>s.matches,u=>ge(s,"change",u))}}function Qt(t,e,r){var s;t.preventDefault();const a=t.target.getAttribute("data-key");a==="backspace"?(ht(e,o(e).slice(0,-1),!0),(s=r())!=null&&s.badGuess&&r(r().badGuess=!1,!0)):o(e).length<5&&ht(e,o(e)+a)}var Be=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Re=U('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ie=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Ke=U('<p class="svelte-1pg2j5l"> </p>'),Ge=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Qe=U('<button formaction="?/update" name="key"> </button>'),Ve=U('<div class="row svelte-1pg2j5l"></div>'),Xe=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ye=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ze=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ca(t,e){ve(e,!0);let r=ke(e,"form",15);const a=new Je("(prefers-reduced-motion: reduce)");let s=_(()=>e.data.answers.at(-1)==="xxxxx"),u=_(()=>o(s)?-1:e.data.answers.length),c=_(()=>e.data.guesses[o(u)]||""),f=_(()=>o(c).length===5);const b=_(()=>{let n={},i={};return e.data.answers.forEach((d,m)=>{const g=e.data.guesses[m];for(let y=0;y<5;y+=1){const p=g[y];d[y]==="x"?(n[p]="exact",i[p]="correct"):n[p]||(n[p]=d[y]==="c"?"close":"missing",i[p]=d[y]==="c"?"present":"absent")}}),{classnames:n,description:i}}),S=_(()=>o(b).classnames),D=_(()=>o(b).description);function N(n){var i;n.metaKey||n.key==="Enter"&&!o(f)||(i=document.querySelector(`[data-key="${n.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var H=Ze();ye("keydown",be,N),we(n=>{var i=Be();pe.title="Sverdle",A(n,i)});var E=L(ut(H),2),w=L(C(E),2);let F;et(w,20,()=>Array.from(Array(6).keys()),n=>n,(n,i)=>{var d=Ie();const m=_(()=>i===o(u));var g=ut(d),y=C(g);z(g);var p=L(g,2);let W;et(p,20,()=>Array.from(Array(5).keys()),x=>x,(x,J)=>{var j=Re();const h=_(()=>o(m)?o(c):e.data.guesses[i]),Q=_(()=>{var k;return(k=e.data.answers[i])==null?void 0:k[J]}),yt=_(()=>{var k;return((k=o(h))==null?void 0:k[J])??""}),$t=_(()=>o(m)&&J===o(h).length),_t=_(()=>o(Q)==="x"),wt=_(()=>o(Q)==="c"),xt=_(()=>o(Q)==="_");let kt;var At=C(j),rt=L(At),te=C(rt);{var ee=k=>{var it=tt("(correct)");A(k,it)},ae=(k,it)=>{{var re=R=>{var nt=tt("(present)");A(R,nt)},se=(R,nt)=>{{var ie=I=>{var ot=tt("(absent)");A(I,ot)},ne=I=>{var ot=tt("empty");A(I,ot)};K(R,I=>{o(xt)?I(ie):I(ne,!1)},nt)}};K(k,R=>{o(wt)?R(re):R(se,!1)},it)}};K(te,k=>{o(_t)?k(ee):k(ae,!1)})}z(rt);var st=L(rt,2);xe(st),z(j),B(k=>{kt=X(j,1,"letter svelte-1pg2j5l",null,kt,k),V(At,`${o(yt)??""} `),st.disabled=!o(m),St(st,o(yt))},[()=>({exact:o(_t),close:o(wt),missing:o(xt),selected:o($t)})]),A(x,j)}),z(p),B(x=>{V(y,`Row ${i+1}`),W=X(p,1,"row svelte-1pg2j5l",null,W,x)},[()=>({current:o(m)})]),A(n,d)}),z(w);var O=L(w,2),T=C(O);{var q=n=>{var i=Ge(),d=ut(i);{var m=p=>{var W=Ke(),x=C(W);z(W),B(()=>V(x,`the answer was "${e.data.answer??""}"`)),A(p,W)};K(d,p=>{!o(s)&&e.data.answer&&p(m)})}var g=L(d,2),y=C(g);z(g),B(()=>V(y,`${o(s)?"you won :)":"game over :("} play again?`)),A(n,i)},v=n=>{var i=Xe(),d=C(i);let m;var g=L(d,2);g.__click=[Qt,c,r];var y=L(g,2);et(y,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],p=>p,(p,W)=>{var x=Ve();et(x,21,()=>W,_e,(J,j)=>{var h=Qe();h.__click=[Qt,c,r];var Q=C(h,!0);z(h),B(()=>{Et(h,"data-key",o(j)),X(h,1,Ee(o(S)[o(j)]),"svelte-1pg2j5l"),h.disabled=o(f),St(h,o(j)),Et(h,"aria-label",`${o(j)??""} ${(o(D)[o(j)]||"")??""}`),V(Q,o(j))}),A(J,h)}),z(x),A(p,x)}),z(i),B(p=>{d.disabled=!o(f),m=X(d,1,"svelte-1pg2j5l",null,m,p)},[()=>({selected:o(f)})]),A(n,i)};K(T,n=>{o(s)||e.data.answers.length>=6?n(q):n(v,!1)})}z(O),z(E),Wt(E,(n,i)=>vt==null?void 0:vt(n,i),()=>()=>({update:n})=>{n({reset:!1})});var l=L(E,2);{var P=n=>{var i=Ye();Wt(i,(d,m)=>mt==null?void 0:mt(d,m),()=>({particleCount:a.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),A(n,i)};K(l,n=>{o(s)&&n(P)})}B(n=>F=X(w,1,"grid svelte-1pg2j5l",null,F,n),[()=>{var n;return{playing:!o(s),"bad-guess":(n=r())==null?void 0:n.badGuess}}]),A(t,H),me()}he(["click"]);export{ca as component};
