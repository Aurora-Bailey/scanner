import{t as _,a as h}from"../chunks/AC61ihKW.js";import"../chunks/CtmZgqb-.js";import{Z as H,_ as P,a0 as R,a1 as V,W as i,X as d,s as $,g as t,m as C,Y as l,a2 as X,V as Y}from"../chunks/BrSCEJBA.js";import{s as Z}from"../chunks/CVohdc8L.js";import{i as q}from"../chunks/B0vC7geI.js";import{e as A,s as o,i as F}from"../chunks/s7Kpw3N-.js";import{b as G}from"../chunks/DmVSQ2E4.js";import{i as J}from"../chunks/Dh0o42D0.js";import{s as K,a as N}from"../chunks/BqqiKuja.js";import{o as Q,a as ee}from"../chunks/FfyIfkFV.js";import{s as te}from"../chunks/-rJQLdYT.js";const ae=!0,he=Object.freeze(Object.defineProperty({__proto__:null,prerender:ae},Symbol.toStringTag,{value:"Module"}));var se=_('<div class="flex items-center justify-between gap-4 p-4 bg-cyan-600 text-lg rounded shadow"><button class="text-white hover:text-red-400 transition"><svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button> <span class="flex-1 text-white truncate"> </span> <div class="flex gap-1"><img class="h-24 rounded"> <img class="h-24 rounded"></div> <button class="hover:text-lime-400 transition"><svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></button></div>'),re=_('<div class="w-full flex flex-col gap-2"></div>'),oe=_('<section class="flex flex-col items-center gap-4 p-4"><video autoplay playsinline="" class="rounded shadow"></video> <!></section>',2);function _e(M,j){H(j,!1);const[D,L]=K(),p=()=>N(te,"$scanner",D);let s=null,a=C(),n=C([]);const O=async()=>{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:405},height:{ideal:720}},audio:!1}),X(a,t(a).srcObject=s)},B=()=>{s==null||s.getTracks().forEach(e=>e.stop()),s=null},E=()=>{if(!t(a))return null;const e=document.createElement("canvas");e.width=t(a).videoWidth,e.height=t(a).videoHeight;const r=e.getContext("2d");return r?(r.drawImage(t(a),0,0),e.toDataURL("image/png")):null};Q(O),ee(B),P(()=>(p(),t(n)),()=>{p()&&$(n,[...t(n),{scan:p(),image:E()}])}),R(),J();var m=oe(),b=d(m);G(b,e=>$(a,e),()=>t(a));var I=i(b,2);{var S=e=>{var r=re();A(r,5,()=>[...t(n)].reverse(),F,(T,x,c)=>{let U=()=>t(x).scan,w=()=>t(x).image;var u=se(),k=d(u);o(k,"aria-label",`Delete scan ${c+1}`);var v=i(k,2),W=d(v,!0);l(v);var g=i(v,2),f=d(g);o(f,"alt",`Capture ${c+1}`);var y=i(f,2);o(y,"alt",`Capture ${c+1}`),l(g);var z=i(g,2);o(z,"aria-label",`Confirm scan ${c+1}`),l(u),Y(()=>{Z(W,U()),o(f,"src",w()),o(y,"src",w())}),h(T,u)}),l(r),h(e,r)};q(I,e=>{t(n).length&&e(S)})}l(m),h(M,m),V(),L()}export{_e as component,he as universal};
