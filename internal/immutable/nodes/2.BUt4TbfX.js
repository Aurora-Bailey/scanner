import{t as l,h as T,a as d}from"../chunks/B9NtPb33.js";import"../chunks/DeZm5tB_.js";import{p as U,t as k,a as W,s as g,c as r,a0 as q,b as n,aq as z,k as t,w as b,v as c}from"../chunks/D0REECA5.js";import{s as x}from"../chunks/K1h4n8tk.js";import{i as B}from"../chunks/DVOgAXz0.js";import{e as P,s as E,i as R}from"../chunks/CM653Hgs.js";import{i as A}from"../chunks/_P4dJY05.js";import{o as F,a as G}from"../chunks/CcR-YJvp.js";const J=!0,ne=Object.freeze(Object.defineProperty({__proto__:null,prerender:J},Symbol.toStringTag,{value:"Module"}));var K=l('<meta name="description" content="Svelte demo app">'),N=l('<div class="image-card svelte-143k2h7"><span id="code"> </span> <img class="svelte-143k2h7"></div>'),Q=l('<div class="gallery svelte-143k2h7"></div>'),V=l('<section class="svelte-143k2h7"><div id="log"></div> <div id="scan-bar" class="svelte-143k2h7"><span id="scan" class="svelte-143k2h7"> </span> <video id="camera" autoplay playsinline="" class="svelte-143k2h7"></video></div> <!></section>',2);function re(L,M){U(M,!1);let v=!1,i=b(""),s=null,o=b([]);function h(e){const a=e.key;if(a==="#"){v=!0,c(i,"");return}if(v){if(a==="Enter"){c(o,[...t(o),{scan:t(i),image:j()}]),setTimeout(()=>{c(i,"")},2e3),v=!1;return}a.length===1&&c(i,t(i)+a)}}async function $(){const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:720},height:{ideal:1280}},audio:!1});s=document.getElementById("camera"),s.srcObject=e}function j(){if(!s)return null;const e=document.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight;const a=e.getContext("2d");return a?(a.drawImage(s,0,0,e.width,e.height),e.toDataURL("image/png")):null}F(()=>{if(typeof window>"u")return!1;window.addEventListener("keydown",h),$()}),G(()=>{if(typeof window>"u")return!1;window.removeEventListener("keydown",h)}),A();var m=V();T(e=>{var a=K();q.title="Home",d(e,a)});var p=g(r(m),2),_=r(p),C=r(_);n(_),z(2),n(p);var D=g(p,2);{var I=e=>{var a=Q();P(a,5,()=>[...t(o)].reverse(),R,(O,w,S)=>{var f=N(),u=r(f),H=r(u,!0);n(u);var y=g(u,2);E(y,"alt",`Captured image ${S+1}`),n(f),k(()=>{x(H,t(w).scan),E(y,"src",t(w).image)}),d(O,f)}),n(a),d(e,a)};B(D,e=>{t(o).length&&e(I)})}n(m),k(()=>x(C,`Waiting for scan: ${t(i)??""}`)),d(L,m),W()}export{re as component,ne as universal};
