import{t as c,a as d}from"../chunks/DlvOV1e5.js";import"../chunks/DmBim1sR.js";import{p as T,t as k,a as U,a1 as W,s as g,c as n,r as s,al as z,i as a,G as b,a4 as l}from"../chunks/DvJFha1T.js";import{s as x}from"../chunks/DtPjCCHc.js";import{i as B}from"../chunks/VIBHD4Hd.js";import{e as G,i as P}from"../chunks/CgP-R1Yy.js";import{h as R}from"../chunks/46OpmppY.js";import{s as E}from"../chunks/BEVdCfZO.js";import{i as q}from"../chunks/B43NpAyL.js";import{o as A,a as F}from"../chunks/DVf8XgYv.js";const J=!0,oe=Object.freeze(Object.defineProperty({__proto__:null,prerender:J},Symbol.toStringTag,{value:"Module"}));var K=c('<meta name="description" content="Svelte demo app">'),N=c('<div class="image-card svelte-143k2h7"><span id="code"> </span> <img class="svelte-143k2h7"></div>'),Q=c('<div class="gallery svelte-143k2h7"></div>'),V=c('<section class="svelte-143k2h7"><div id="log"></div> <div id="scan-bar" class="svelte-143k2h7"><span id="scan" class="svelte-143k2h7"> </span> <video id="camera" autoplay playsinline="" class="svelte-143k2h7"></video></div> <!></section>',2);function de(L,M){T(M,!1);let m=!1,i=b(""),r=null,o=b([]);function h(e){const t=e.key;if(t==="#"){m=!0,l(i,"");return}if(m){if(t==="Enter"){l(o,[...a(o),{scan:a(i),image:j()}]),setTimeout(()=>{l(i,"")},2e3),m=!1;return}t.length===1&&l(i,a(i)+t)}}async function $(){const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:720},height:{ideal:1280}},audio:!1});r=document.getElementById("camera"),r.srcObject=e}function j(){if(!r)return null;const e=document.createElement("canvas");e.width=r.videoWidth,e.height=r.videoHeight;const t=e.getContext("2d");return t?(t.drawImage(r,0,0,e.width,e.height),e.toDataURL("image/png")):null}A(()=>{if(typeof window>"u")return!1;window.addEventListener("keydown",h),$()}),F(()=>{if(typeof window>"u")return!1;window.removeEventListener("keydown",h)}),q();var v=V();R(e=>{var t=K();W.title="Home",d(e,t)});var p=g(n(v),2),_=n(p),C=n(_);s(_),z(2),s(p);var D=g(p,2);{var I=e=>{var t=Q();G(t,5,()=>[...a(o)].reverse(),P,(O,w,S)=>{var f=N(),u=n(f),H=n(u,!0);s(u);var y=g(u,2);E(y,"alt",`Captured image ${S+1}`),s(f),k(()=>{x(H,a(w).scan),E(y,"src",a(w).image)}),d(O,f)}),s(t),d(e,t)};B(D,e=>{a(o).length&&e(I)})}s(v),k(()=>x(C,`Waiting for scan: ${a(i)??""}`)),d(L,v),U()}export{de as component,oe as universal};
