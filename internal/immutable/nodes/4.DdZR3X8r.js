var Ae=e=>{throw TypeError(e)};var Pe=(e,t,n)=>t.has(e)||Ae("Cannot "+n);var le=(e,t,n)=>(Pe(e,t,"read from private field"),n?n.call(e):t.get(e)),ce=(e,t,n)=>t.has(e)?Ae("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),de=(e,t,n,i)=>(Pe(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);import{t as L,h as st,a as j,d as ee}from"../chunks/bZ3WfWS8.js";import{aH as nt,b as Qe,aB as Ge,e as it,W as ot,s as he,aL as lt,g as s,aa as ct,aF as dt,X as ut,k as E,Y as ue,j as J,Z as vt,aM as ft,$ as mt,l as T,aK as g,o as z}from"../chunks/CEzsMHlm.js";import{o as pt,d as bt,e as yt,s as V}from"../chunks/Dx4z452v.js";import{p as ht,i as I}from"../chunks/Crt8JkDY.js";import{e as te,s as X,r as gt,b as ze,i as _t,a as Se,c as xt}from"../chunks/DwFBE849.js";import{i as wt,a as kt,c as jt,d as At}from"../chunks/Cak8EUFn.js";function We(e,t,n){nt(()=>{var i=Qe(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var o=!1,m={};Ge(()=>{var u=n();it(u),o&&ot(m,u)&&(m=u,i.update(u))}),o=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function Pt(e){he(e,e.v+1)}function zt(e){let t=0,n=ct(0),i;return()=>{lt()&&(s(n),Ge(()=>(t===0&&(i=Qe(()=>e(()=>Pt(n)))),t+=1,()=>{dt().then(()=>{t-=1,t===0&&(i==null||i(),i=void 0)})})))}}function St(e){const t=JSON.parse(e);return t.data&&(t.data=jt(t.data,At.decoders)),t}function ve(e){return HTMLElement.prototype.cloneNode.call(e)}function fe(e,t=()=>{}){const n=async({action:o,result:m,reset:u=!0,invalidateAll:p=!0})=>{m.type==="success"&&(u&&HTMLFormElement.prototype.reset.call(e),p&&await wt()),(location.origin+location.pathname===o.origin+o.pathname||m.type==="redirect"||m.type==="error")&&await kt(m)};async function i(o){var D,O,H,q,d;if(((D=o.submitter)!=null&&D.hasAttribute("formmethod")?o.submitter.formMethod:ve(e).method)!=="post")return;o.preventDefault();const u=new URL((O=o.submitter)!=null&&O.hasAttribute("formaction")?o.submitter.formAction:ve(e).action),p=(H=o.submitter)!=null&&H.hasAttribute("formenctype")?o.submitter.formEnctype:ve(e).enctype,_=new FormData(e),C=(q=o.submitter)==null?void 0:q.getAttribute("name");C&&_.append(C,((d=o.submitter)==null?void 0:d.getAttribute("value"))??"");const N=new AbortController;let F=!1;const S=await t({action:u,cancel:()=>F=!0,controller:N,formData:_,formElement:e,submitter:o.submitter})??n;if(F)return;let x;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const P=p==="multipart/form-data"?_:new URLSearchParams(_),r=await fetch(u,{method:"POST",headers:l,cache:"no-store",body:P,signal:N.signal});x=St(await r.text()),x.type==="error"&&(x.status=r.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;x={type:"error",error:l}}await S({action:u,formData:_,formElement:e,update:l=>n({action:u,result:x,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",i)}}}var Ee="mz3PUW_p",Me=["#FFC700","#FF0000","#2E3191","#41BBC7"],Le=3500,Ue=.5,He=150,Te="mix",Ce=12,Fe="",De=!0,Ne=800,Oe=1600;function me(e,t={}){let{colors:n=Me,duration:i=Le,force:o=Ue,particleCount:m=He,particleShape:u=Te,particleSize:p=Ce,particleClass:_=Fe,destroyAfterDone:C=De,stageHeight:N=Ne,stageWidth:F=Oe}=t;(function(d){if(document.querySelector("style[data-neoconfetti]"))return;const l=pe("style");l.dataset.neoconfetti="",l.textContent=d,be(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",N+"px");let U=[],S=[];const x=()=>Y(M()*(Ut-1)),D=(d,l)=>u!=="rectangles"&&(d==="circles"||Ht(l));function O(d,l){const P=x(),r=D(u,P),a=(b,h)=>d.style.setProperty(b,h+"");a("--xlp",ye(ae(Ke(l,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",i-Y(1e3*M())+"ms");const c=M()<Et?Q(M()*Mt,2):0;a("--x1",c),a("--x2",-1*c),a("--x3",c),a("--x4",Q(ae(ye(ae(Ke(l,90)-180),0,180,-1,1)),4)),a("--y1",Q(M()*Be,4)),a("--y2",Q(M()*o*(Ve()?1:-1),4)),a("--y3",Be),a("--y4",Q(Lt(ye(ae(l-180),0,180,o,-o),0),4)),a("--w",(r?p:Y(4*M())+p/2)+"px"),a("--h",(r?p:Y(2*M())+p)+"px");const v=P.toString(2).padStart(3,"0").split("");a("--hr",v.map(b=>+b/2+"").join(" ")),a("--r",v.join(" ")),a("--rd",Q(M()*(Wt-qe)+qe)+"ms"),a("--br",r?"50%":0)}let H;function q(){e.innerHTML="",clearTimeout(H),U=Je(m,n),S=function(d,l=[],P){const r=[];for(const{color:a}of l){const c=pe("div");c.className=`${Ee} ${P}`,c.style.setProperty("--bgc",a);const v=pe("div");be(c,v),be(d,c),r.push(c)}return r}(e,U,_);for(const[d,l]of Re(S))O(l,U[+d].degree);H=setTimeout(()=>{C&&(e.innerHTML="")},i)}return q(),{update(d){const l=d.particleCount??He,P=d.particleShape??Te,r=d.particleSize??Ce,a=d.particleClass??Fe,c=d.colors??Me,v=d.stageHeight??Ne,b=d.duration??Le,h=d.force??Ue,f=d.stageWidth??Oe,W=d.destroyAfterDone??De;U=Je(l,c);let w=!1;if(l===m){S=Array.from(e.querySelectorAll(`.${Ee}`));for(const[B,{color:A}]of Re(U)){const y=S[+B];JSON.stringify(n)!==JSON.stringify(c)&&y.style.setProperty("--bgc",A),P!==u&&y.style.setProperty("--br",D(P,x())?"50%":"0"),a!==_&&(_&&y.classList.remove(_),a&&y.classList.add(a))}}else w=!0;C&&!W&&clearTimeout(H),e.style.setProperty("--sh",v+"px"),i=b,n=c,o=h,m=l,u=P,p=r,_=a,C=W,N=v,F=f,w&&q()},destroy(){e.innerHTML="",clearTimeout(H)}}}var qe=200,Wt=800,Et=.1,Mt=.3,Be=.5,ae=Math.abs,M=Math.random,Y=Math.round,Lt=Math.max,pe=e=>document.createElement(e),be=(e,t)=>e.appendChild(t),Je=(e,t)=>Array.from({length:e},(n,i)=>({color:t[i%t.length],degree:360*i/e})),Q=(e,t=2)=>Y((e+Number.EPSILON)*10**t)/10**t,ye=(e,t,n,i,o)=>(e-t)*(o-i)/(n-t)+i,Ke=(e,t)=>e+t>360?e+t-360:e+t,Ve=()=>M()>.5,Re=Object.entries,Ut=6,Ht=e=>e!==1&&Ve(),Z,$;class Tt{constructor(t,n){ce(this,Z);ce(this,$);de(this,Z,t),de(this,$,zt(n))}get current(){return le(this,$).call(this),le(this,Z).call(this)}}Z=new WeakMap,$=new WeakMap;const Ct=/\(.+\)/;class Ft extends Tt{constructor(t,n){let i=Ct.test(t)?t:`(${t})`;const o=window.matchMedia(i);super(()=>o.matches,m=>pt(o,"change",m))}}function Ie(e,t,n){var o;e.preventDefault();const i=e.target.getAttribute("data-key");i==="backspace"?(he(t,s(t).slice(0,-1),!0),(o=n())!=null&&o.badGuess&&n(n().badGuess=!1,!0)):s(t).length<5&&he(t,s(t)+i)}var Dt=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Nt=L('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ot=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),qt=L('<p class="svelte-1pg2j5l"> </p>'),Bt=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Jt=L('<button formaction="?/update" name="key"> </button>'),Kt=L('<div class="row svelte-1pg2j5l"></div>'),Rt=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),It=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Qt=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ta(e,t){ut(t,!0);let n=ht(t,"form",15);const i=new Ft("(prefers-reduced-motion: reduce)");let o=g(()=>t.data.answers.at(-1)==="xxxxx"),m=g(()=>s(o)?-1:t.data.answers.length),u=g(()=>t.data.guesses[s(m)]||""),p=g(()=>s(u).length===5);const _=g(()=>{let r={},a={};return t.data.answers.forEach((c,v)=>{const b=t.data.guesses[v];for(let h=0;h<5;h+=1){const f=b[h];c[h]==="x"?(r[f]="exact",a[f]="correct"):r[f]||(r[f]=c[h]==="c"?"close":"missing",a[f]=c[h]==="c"?"present":"absent")}}),{classnames:r,description:a}}),C=g(()=>s(_).classnames),N=g(()=>s(_).description);function F(r){var a;r.metaKey||r.key==="Enter"&&!s(p)||(a=document.querySelector(`[data-key="${r.key}" i]`))==null||a.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var U=Qt();yt("keydown",ft,F),st(r=>{var a=Dt();mt.title="Sverdle",j(r,a)});var S=E(ue(U),2),x=E(T(S),2);let D;te(x,20,()=>Array.from(Array(6).keys()),r=>r,(r,a)=>{var c=Ot();const v=g(()=>a===s(m));var b=ue(c),h=T(b);z(b);var f=E(b,2);let W;te(f,20,()=>Array.from(Array(5).keys()),w=>w,(w,B)=>{var A=Nt();const y=g(()=>s(v)?s(u):t.data.guesses[a]),G=g(()=>{var k;return(k=t.data.answers[a])==null?void 0:k[B]}),ge=g(()=>{var k;return((k=s(y))==null?void 0:k[B])??""}),Xe=g(()=>s(v)&&B===s(y).length),_e=g(()=>s(G)==="x"),xe=g(()=>s(G)==="c"),we=g(()=>s(G)==="_");let ke;var je=T(A),re=E(je),Ye=T(re);{var Ze=k=>{var ne=ee("(correct)");j(k,ne)},$e=(k,ne)=>{{var et=K=>{var ie=ee("(present)");j(K,ie)},tt=(K,ie)=>{{var at=R=>{var oe=ee("(absent)");j(R,oe)},rt=R=>{var oe=ee("empty");j(R,oe)};I(K,R=>{s(we)?R(at):R(rt,!1)},ie)}};I(k,K=>{s(xe)?K(et):K(tt,!1)},ne)}};I(Ye,k=>{s(_e)?k(Ze):k($e,!1)})}z(re);var se=E(re,2);gt(se),z(A),J(k=>{ke=X(A,1,"letter svelte-1pg2j5l",null,ke,k),V(je,`${s(ge)??""} `),se.disabled=!s(v),ze(se,s(ge))},[()=>({exact:s(_e),close:s(xe),missing:s(we),selected:s(Xe)})]),j(w,A)}),z(f),J(w=>{V(h,`Row ${a+1}`),W=X(f,1,"row svelte-1pg2j5l",null,W,w)},[()=>({current:s(v)})]),j(r,c)}),z(x);var O=E(x,2),H=T(O);{var q=r=>{var a=Bt(),c=ue(a);{var v=f=>{var W=qt(),w=T(W);z(W),J(()=>V(w,`the answer was "${t.data.answer??""}"`)),j(f,W)};I(c,f=>{!s(o)&&t.data.answer&&f(v)})}var b=E(c,2),h=T(b);z(b),J(()=>V(h,`${s(o)?"you won :)":"game over :("} play again?`)),j(r,a)},d=r=>{var a=Rt(),c=T(a);let v;var b=E(c,2);b.__click=[Ie,u,n];var h=E(b,2);te(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],f=>f,(f,W)=>{var w=Kt();te(w,21,()=>W,_t,(B,A)=>{var y=Jt();y.__click=[Ie,u,n];var G=T(y,!0);z(y),J(()=>{Se(y,"data-key",s(A)),X(y,1,xt(s(C)[s(A)]),"svelte-1pg2j5l"),y.disabled=s(p),ze(y,s(A)),Se(y,"aria-label",`${s(A)??""} ${(s(N)[s(A)]||"")??""}`),V(G,s(A))}),j(B,y)}),z(w),j(f,w)}),z(a),J(f=>{c.disabled=!s(p),v=X(c,1,"svelte-1pg2j5l",null,v,f)},[()=>({selected:s(p)})]),j(r,a)};I(H,r=>{s(o)||t.data.answers.length>=6?r(q):r(d,!1)})}z(O),z(S),We(S,(r,a)=>fe==null?void 0:fe(r,a),()=>()=>({update:r})=>{r({reset:!1})});var l=E(S,2);{var P=r=>{var a=It();We(a,(c,v)=>me==null?void 0:me(c,v),()=>({particleCount:i.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(r,a)};I(l,r=>{s(o)&&r(P)})}J(r=>D=X(x,1,"grid svelte-1pg2j5l",null,D,r),[()=>{var r;return{playing:!s(o),"bad-guess":(r=n())==null?void 0:r.badGuess}}]),j(e,U),vt()}bt(["click"]);export{ta as component};
